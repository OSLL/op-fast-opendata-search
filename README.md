# op-fast-wikidata-search
Эта утилита работает с открытыми данными по Санкт-Петербургу в формате csv-таблиц,
размещенными на сайте http://data.gov.spb.ru/. Она анализирует файлы с музеями и памятниками.

Компиляция утилиты осуществлется с помощью подключения в командной строке директории,
которая содержит исходный код и выполнения команды make. Дальнейший запуск осуществляется командой:
[code]./opendata_search.out <ключи>[/code]

Файлы для поиска передаются в утилиту с помощью ключа --file:
[code]./opendata_search.out --file test_data.csv[/code]
Если файл не задан явно, поиск осуществляется в файлах по умолчанию.

Утилита имеет искать файлы по фрагменту названия, описания или исторической справки.
Для использования этой функции вызовите утилиту с ключом --search <фрагмент>.
Например, следующий запуск: [code]./opendata_search.out --search памятник[/code]
вернет все объекты, содержащие слово "памятник" в  названии, описании или исторической справке.

Также утилита умеет искать объекты по заданным координатам и радиусу поиска, задаваемому в метрах.
Следующая команда: [code]./opendata_search.out --geosearch 56.389,30.689,4000[/code]
вернет объекты, находящиеся в радиусе 4 километров от точки с координатами 56.389, 30.689 (в долях
градусов), напечатав их название, адрес и расстояние от заданной точки.
Обратите внимание, что разделителем является знак запятой, пробелы между координатами, радиусом не
допускаются!

Утилита использует специальный ключ limit для работы в режиме ограниченной памяти. Ключ limit ограничивает количество десериализованных объектов, которые могут одновременно
хранится в оперативной памяти компьютера.
Пример использования: [code]./opendata_search.out --limit 50[/code] - количество хранящихся в памяти
объектов не будет превышать 50 в любой момент исполнения.

Утилита поддерживает комбинации ключей --file, --search и --limit; --file, --geosearch и --limit.
При вызове -search и -geosearch одновременно будут последовательно найдены сначала объекты, поля которых совпадают с полученным объектом, а затем - будут найдены объекты по координатам.
При этом, если был использован также ключ -limit <N>, результаты будут выводится на печать
последовательно и порционно:
сначала поиск по полям N объектов, затем поиск по координатам N объектов, и так далее до конца файла.
